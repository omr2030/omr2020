<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù†Ø¸Ø§Ù… Ø§ØªØµØ§Ù„Ø§Øª - Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ† ÙˆØ¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #ff6600, #ffffff);
            min-height: 100vh;
            direction: rtl;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            background: #ff6600;
            color: white;
            padding: 20px;
            text-align: center;
            border-radius: 10px;
            margin-bottom: 30px;
            box-shadow: 0 4px 15px rgba(255, 102, 0, 0.3);
        }

        .logo {
            font-size: 2.5em;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .nav-bar {
            background: #333;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
            display: none;
        }

        .nav-bar.show {
            display: block;
        }

        .nav-btn {
            background: #ff6600;
            color: white;
            border: none;
            padding: 10px 20px;
            margin: 5px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            transition: all 0.3s;
        }

        .nav-btn:hover {
            background: #e55a00;
            transform: translateY(-2px);
        }

        .user-info {
            float: left;
            color: white;
            font-size: 14px;
        }

        .login-form, .employee-panel, .admin-panel {
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
            margin-bottom: 20px;
            display: none;
        }

        .login-form.show, .employee-panel.show, .admin-panel.show {
            display: block;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            color: #333;
        }

        .form-group input, .form-group select, .form-group textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s;
        }

        .form-group input:focus, .form-group select:focus, .form-group textarea:focus {
            outline: none;
            border-color: #ff6600;
        }

        .btn {
            background: #ff6600;
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            transition: all 0.3s;
            margin: 5px;
        }

        .btn:hover {
            background: #e55a00;
            transform: translateY(-2px);
        }

        .btn-secondary {
            background: #666;
        }

        .btn-secondary:hover {
            background: #555;
        }

        .btn-success {
            background: #28a745;
        }

        .btn-success:hover {
            background: #218838;
        }

        .btn-danger {
            background: #dc3545;
        }

        .btn-danger:hover {
            background: #c82333;
        }

        .btn-info {
            background: #17a2b8;
        }

        .btn-info:hover {
            background: #138496;
        }

        .data-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        .data-table th, .data-table td {
            padding: 12px;
            text-align: right;
            border-bottom: 1px solid #ddd;
        }

        .data-table th {
            background: #ff6600;
            color: white;
            font-weight: bold;
        }

        .data-table tr:nth-child(even) {
            background: #f8f9fa;
        }

        .data-table tr:hover {
            background: #e9ecef;
        }

        .status-pending {
            color: #ffc107;
            font-weight: bold;
        }

        .status-completed {
            color: #28a745;
            font-weight: bold;
        }

        .status-missing {
            color: #dc3545;
            font-weight: bold;
        }

        .alert {
            padding: 15px;
            margin: 20px 0;
            border-radius: 8px;
            font-weight: bold;
        }

        .alert-success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }

        .alert-error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }

        .stats-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            text-align: center;
        }

        .stat-number {
            font-size: 2.5em;
            font-weight: bold;
            color: #ff6600;
        }

        .stat-label {
            color: #666;
            margin-top: 10px;
        }

        .employee-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }

        .employee-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 15px;
            border-bottom: 2px solid #f0f0f0;
        }

        .employee-name {
            font-size: 1.3em;
            font-weight: bold;
            color: #333;
        }

        .employee-id {
            background: #ff6600;
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.9em;
        }

        .request-number {
            background: #17a2b8;
            color: white;
            padding: 8px 15px;
            border-radius: 5px;
            font-weight: bold;
            display: inline-block;
            margin-bottom: 10px;
        }

        .file-upload-area {
            border: 2px dashed #ddd;
            border-radius: 8px;
            padding: 20px;
            text-align: center;
            background: #f8f9fa;
            transition: all 0.3s;
            margin-bottom: 15px;
        }

        .file-upload-area:hover {
            border-color: #ff6600;
            background: #fff;
        }

        .file-upload-area.dragover {
            border-color: #ff6600;
            background: #fff5f5;
        }

        .file-list {
            margin-top: 15px;
        }

        .file-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px;
            background: #f8f9fa;
            border-radius: 5px;
            margin-bottom: 5px;
        }

        .file-info {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .file-icon {
            font-size: 20px;
        }

        .employee-link {
            background: #17a2b8;
            color: white;
            padding: 10px 15px;
            border-radius: 5px;
            text-decoration: none;
            display: inline-block;
            margin: 5px;
            font-weight: bold;
        }

        .employee-link:hover {
            background: #138496;
            color: white;
            text-decoration: none;
        }

        .link-container {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            margin: 10px 0;
        }

        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
        }

        .modal-content {
            background-color: white;
            margin: 5% auto;
            padding: 30px;
            border-radius: 15px;
            width: 90%;
            max-width: 600px;
            max-height: 80vh;
            overflow-y: auto;
        }

        .close {
            color: #aaa;
            float: left;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
        }

        .close:hover {
            color: #000;
        }

        .search-filter {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
        }

        .filter-row {
            display: flex;
            gap: 15px;
            align-items: end;
            flex-wrap: wrap;
        }

        .filter-group {
            flex: 1;
            min-width: 200px;
        }

        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
            
            .stats-container {
                grid-template-columns: 1fr;
            }
            
            .filter-row {
                flex-direction: column;
            }
            
            .filter-group {
                min-width: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="logo">ğŸ¢ Ù†Ø¸Ø§Ù… Ø§ØªØµØ§Ù„Ø§Øª</div>
            <p>Ù†Ø¸Ø§Ù… Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ† ÙˆØ¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</p>
        </div>

        <!-- Navigation Bar -->
        <div class="nav-bar" id="navBar">
            <button class="nav-btn" onclick="showEmployeePanel()">Ù„ÙˆØ­Ø© Ø§Ù„Ù…ÙˆØ¸Ù</button>
            <button class="nav-btn" id="adminBtn" onclick="showAdminPanel()" style="display: none;">Ù„ÙˆØ­Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©</button>
            <button class="nav-btn" onclick="showInstructions()">Ø§Ù„ØªØ¹Ù„ÙŠÙ…Ø§Øª</button>
            <button class="nav-btn" onclick="logout()">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬</button>
            <div class="user-info" id="userInfo"></div>
        </div>

        <!-- Login Form -->
        <div class="login-form show" id="loginForm">
            <h2 style="color: #ff6600; margin-bottom: 30px; text-align: center;">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</h2>
            <div class="form-group">
                <label>Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…:</label>
                <input type="text" id="username" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…">
            </div>
            <div class="form-group">
                <label>ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±:</label>
                <input type="password" id="password" placeholder="Ø£Ø¯Ø®Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±">
            </div>
            <button class="btn" onclick="login()">Ø¯Ø®ÙˆÙ„</button>
            
            <div style="margin-top: 30px; padding: 20px; background: #f8f9fa; border-radius: 10px;">
                <h4 style="color: #333; margin-bottom: 15px;">Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠØ©:</h4>
            </div>
        </div>

        <!-- Employee Panel -->
        <div class="employee-panel" id="employeePanel">
            <h2 style="color: #ff6600; margin-bottom: 30px;">Ù„ÙˆØ­Ø© Ø§Ù„Ù…ÙˆØ¸Ù - Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</h2>
            
            <!-- Employee Info Card -->
            <div class="employee-card">
                <div class="employee-header">
                    <div class="employee-name" id="employeeName">Ø§Ø³Ù… Ø§Ù„Ù…ÙˆØ¸Ù</div>
                    <div class="employee-id" id="employeeId">Ø±Ù‚Ù… Ø§Ù„Ù…ÙˆØ¸Ù</div>
                </div>
                <div class="request-number" id="currentRequestNumber">Ø±Ù‚Ù… Ø§Ù„Ø·Ù„Ø¨ Ø§Ù„Ø­Ø§Ù„ÙŠ: ETI-0001</div>
            </div>

            <!-- Data Entry Form -->
            <div style="background: white; padding: 30px; border-radius: 15px; box-shadow: 0 8px 25px rgba(0,0,0,0.1);">
                <h3 style="color: #333; margin-bottom: 20px;">Ø¥Ø¯Ø®Ø§Ù„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¹Ù…ÙŠÙ„</h3>
                
                <div class="form-group">
                    <label>Ø§Ø³Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„:</label>
                    <input type="text" id="customerName" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ø³Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„ Ø§Ù„ÙƒØ§Ù…Ù„">
                </div>
                
                <div class="form-group">
                    <label>Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ù‚ÙˆÙ…ÙŠ:</label>
                    <input type="text" id="nationalId" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ù‚ÙˆÙ…ÙŠ (14 Ø±Ù‚Ù…)" maxlength="14">
                </div>
                
                <div class="form-group">
                    <label>Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ:</label>
                    <input type="text" id="phoneNumber" placeholder="Ø£Ø¯Ø®Ù„ Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ">
                </div>
                
                <div class="form-group">
                    <label>Ø§Ù„Ø¹Ù†ÙˆØ§Ù†:</label>
                    <textarea id="address" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ù„Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ÙƒØ§Ù…Ù„" rows="3"></textarea>
                </div>
                
                <div class="form-group">
                    <label>Ù†ÙˆØ¹ Ø§Ù„Ø®Ø¯Ù…Ø©:</label>
                    <select id="serviceType">
                        <option value="">Ø§Ø®ØªØ± Ù†ÙˆØ¹ Ø§Ù„Ø®Ø¯Ù…Ø©</option>
                        <option value="Ø®Ø· Ø¬Ø¯ÙŠØ¯">Ø®Ø· Ø¬Ø¯ÙŠØ¯</option>
                        <option value="ØªØ¬Ø¯ÙŠØ¯ Ø®Ø·">ØªØ¬Ø¯ÙŠØ¯ Ø®Ø·</option>
                        <option value="ØªØ­Ø¯ÙŠØ«">Ù†Ù‚Ù„ Ù…Ù„ÙƒÙŠØ©</option>
                        <option value="Ø¥Ù„ØºØ§Ø¡ Ø®Ø·">Ø¥Ù„ØºØ§Ø¡ Ø®Ø·</option>
                        <option value="Ø®Ø¯Ù…Ø© Ø¥Ù†ØªØ±Ù†Øª">Ø®Ø¯Ù…Ø© Ø¥Ù†ØªØ±Ù†Øª</option>
                        <option value="Ø®Ø¯Ù…Ø© ÙØ§ØªÙˆØ±Ø©">Ø®Ø¯Ù…Ø© ÙØ§ØªÙˆØ±Ø©</option>
                        <option value="Ø£Ø®Ø±Ù‰">Ø£Ø®Ø±Ù‰</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label>Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ©:</label>
                    <textarea id="notes" placeholder="Ø£ÙŠ Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø£Ùˆ ØªÙØ§ØµÙŠÙ„ Ø¥Ø¶Ø§ÙÙŠØ©" rows="3"></textarea>
                </div>
                
                <!-- File Upload Section -->
                <div class="form-group">
                    <label>Ø±ÙØ¹ Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„Ù‡ÙˆÙŠØ© ÙˆØ§Ù„Ù…Ø³ØªÙ†Ø¯Ø§Øª:</label>
                    <div class="file-upload-area" id="fileUploadArea" ondrop="dropHandler(event)" ondragover="dragOverHandler(event)" ondragleave="dragLeaveHandler(event)">
                        <p>ğŸ“ Ø§Ø³Ø­Ø¨ Ø§Ù„Ù…Ù„ÙØ§Øª Ù‡Ù†Ø§ Ø£Ùˆ Ø§Ù†Ù‚Ø± Ù„Ù„Ø§Ø®ØªÙŠØ§Ø±</p>
                        <input type="file" id="fileInput" multiple accept=".jpg,.jpeg,.png,.pdf,.doc,.docx" style="display: none;" onchange="handleFileSelect(event)">
                        <button type="button" class="btn btn-secondary" onclick="document.getElementById('fileInput').click()">Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù…Ù„ÙØ§Øª</button>
                    </div>
                    <div class="file-list" id="fileList"></div>
                </div>
                
                <button class="btn" onclick="submitCustomerData()">Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</button>
                <button class="btn btn-secondary" onclick="clearForm()">Ù…Ø³Ø­ Ø§Ù„Ù†Ù…ÙˆØ°Ø¬</button>
            </div>

            <!-- Employee's Data History -->
            <div style="margin-top: 30px;">
                <h3 style="color: #333; margin-bottom: 20px;">Ø³Ø¬Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø¯Ø®Ù„Ø©</h3>
                <button class="btn btn-info" onclick="showMyData()">Ø¹Ø±Ø¶ Ø¨ÙŠØ§Ù†Ø§ØªÙŠ</button>
                <button class="btn btn-secondary" onclick="hideMyData()">Ø¥Ø®ÙØ§Ø¡</button>
                
                <div id="myDataSection" style="display: none; margin-top: 20px;">
                    <table class="data-table" id="myDataTable">
                        <thead>
                            <tr>
                                <th>Ø±Ù‚Ù… Ø§Ù„Ø·Ù„Ø¨</th>
                                <th>Ø§Ø³Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„</th>
                                <th>Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ù‚ÙˆÙ…ÙŠ</th>
                                <th>Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ</th>
                                <th>Ù†ÙˆØ¹ Ø§Ù„Ø®Ø¯Ù…Ø©</th>
                                <th>ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¥Ø¯Ø®Ø§Ù„</th>
                                <th>Ø§Ù„Ø­Ø§Ù„Ø©</th>
                            </tr>
                        </thead>
                        <tbody id="myDataTableBody">
                            <!-- Data will be populated here -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Admin Panel -->
        <div class="admin-panel" id="adminPanel">
            <h2 style="color: #ff6600; margin-bottom: 30px;">Ù„ÙˆØ­Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©</h2>
            
            <!-- Statistics -->
            <div class="stats-container">
                <div class="stat-card">
                    <div class="stat-number" id="totalEmployees">0</div>
                    <div class="stat-label">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ†</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="totalData">0</div>
                    <div class="stat-label">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø¯Ø®Ù„Ø©</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="employeesWithoutData">0</div>
                    <div class="stat-label">Ù…ÙˆØ¸ÙÙŠÙ† Ø¨Ø¯ÙˆÙ† Ø¨ÙŠØ§Ù†Ø§Øª</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="todayData">0</div>
                    <div class="stat-label">Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ÙŠÙˆÙ…</div>
                </div>
            </div>

            <!-- Employee Management -->
            <div style="background: white; padding: 30px; border-radius: 15px; box-shadow: 0 8px 25px rgba(0,0,0,0.1); margin-bottom: 30px;">
                <h3 style="color: #333; margin-bottom: 20px;">Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ†</h3>
                
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; margin-bottom: 20px;">
                    <div class="form-group">
                        <label>Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…:</label>
                        <input type="text" id="newUsername" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø¬Ø¯ÙŠØ¯">
                    </div>
                    <div class="form-group">
                        <label>ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±:</label>
                        <input type="password" id="newPassword" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±">
                    </div>
                    <div class="form-group">
                        <label>Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„:</label>
                        <input type="text" id="newFullName" placeholder="Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„ Ù„Ù„Ù…ÙˆØ¸Ù">
                    </div>
                </div>
                
                <button class="btn" onclick="addNewEmployee()">Ø¥Ø¶Ø§ÙØ© Ù…ÙˆØ¸Ù Ø¬Ø¯ÙŠØ¯</button>
                
                <!-- Employee Links Management -->
                <div style="margin-top: 30px;">
                    <h4 style="color: #333; margin-bottom: 15px;">Ø±ÙˆØ§Ø¨Ø· Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ† Ù„Ù„ÙˆØµÙˆÙ„ Ù„Ù„Ù†Ø¸Ø§Ù…</h4>
                    <div class="link-container">
                        <p style="margin-bottom: 10px; color: #666;">Ø§Ù„Ø±Ø§Ø¨Ø· Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ Ù„Ù„Ù†Ø¸Ø§Ù…:</p>
                        <div style="background: white; padding: 10px; border-radius: 5px; border: 1px solid #ddd; margin-bottom: 15px;">
                            <code id="systemLink">file:///c:/Users/omr/Downloads/etisalat-system/etisalat-system.html</code>
                            <button class="btn btn-info" onclick="copySystemLink()" style="margin-right: 10px;">Ù†Ø³Ø® Ø§Ù„Ø±Ø§Ø¨Ø·</button>
                        </div>
                        <p style="color: #666; font-size: 14px;">ÙŠÙ…ÙƒÙ† Ù„Ù„Ù…ÙˆØ¸ÙÙŠÙ† Ø§Ø³ØªØ®Ø¯Ø§Ù… Ù‡Ø°Ø§ Ø§Ù„Ø±Ø§Ø¨Ø· Ù„Ù„ÙˆØµÙˆÙ„ Ù„Ù„Ù†Ø¸Ø§Ù… Ù…Ù† Ø£ÙŠ Ø¬Ù‡Ø§Ø² ÙƒÙ…Ø¨ÙŠÙˆØªØ±</p>
                    </div>
                </div>
                
                <table class="data-table" id="employeesTable" style="margin-top: 20px;">
                    <thead>
                        <tr>
                            <th>Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…</th>
                            <th>Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„</th>
                            <th>Ø±Ù‚Ù… Ø§Ù„Ù…ÙˆØ¸Ù</th>
                            <th>Ø¹Ø¯Ø¯ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø¯Ø®Ù„Ø©</th>
                            <th>Ø¢Ø®Ø± Ù†Ø´Ø§Ø·</th>
                            <th>Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>
                        </tr>
                    </thead>
                    <tbody id="employeesTableBody">
                        <!-- Data will be populated here -->
                    </tbody>
                </table>
            </div>

            <!-- All Data View -->
            <div style="background: white; padding: 30px; border-radius: 15px; box-shadow: 0 8px 25px rgba(0,0,0,0.1);">
                <h3 style="color: #333; margin-bottom: 20px;">Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø¯Ø®Ù„Ø©</h3>
                
                <!-- Search and Filter -->
                <div class="search-filter">
                    <div class="filter-row">
                        <div class="filter-group">
                            <label>Ø§Ù„Ø¨Ø­Ø«:</label>
                            <input type="text" id="searchInput" placeholder="Ø§Ù„Ø¨Ø­Ø« ÙÙŠ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª..." onkeyup="filterAllData()">
                        </div>
                        <div class="filter-group">
                            <label>ÙÙ„ØªØ±Ø© Ø¨Ø§Ù„Ù…ÙˆØ¸Ù:</label>
                            <select id="employeeFilter" onchange="filterAllData()">
                                <option value="">Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ†</option>
                            </select>
                        </div>
                        <div class="filter-group">
                            <label>ÙÙ„ØªØ±Ø© Ø¨Ù†ÙˆØ¹ Ø§Ù„Ø®Ø¯Ù…Ø©:</label>
                            <select id="serviceFilter" onchange="filterAllData()">
                                <option value="">Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø®Ø¯Ù…Ø§Øª</option>
                                <option value="Ø®Ø· Ø¬Ø¯ÙŠØ¯">Ø®Ø· Ø¬Ø¯ÙŠØ¯</option>
                                <option value="ØªØ¬Ø¯ÙŠØ¯ Ø®Ø·">ØªØ¬Ø¯ÙŠØ¯ Ø®Ø·</option>
                                <option value="Ù†Ù‚Ù„ Ù…Ù„ÙƒÙŠØ©">Ù†Ù‚Ù„ Ù…Ù„ÙƒÙŠØ©</option>
                                <option value="Ø¥Ù„ØºØ§Ø¡ Ø®Ø·">Ø¥Ù„ØºØ§Ø¡ Ø®Ø·</option>
                                <option value="Ø®Ø¯Ù…Ø© Ø¥Ù†ØªØ±Ù†Øª">Ø®Ø¯Ù…Ø© Ø¥Ù†ØªØ±Ù†Øª</option>
                                <option value="Ø®Ø¯Ù…Ø© ÙØ§ØªÙˆØ±Ø©">Ø®Ø¯Ù…Ø© ÙØ§ØªÙˆØ±Ø©</option>
                                <option value="Ø£Ø®Ø±Ù‰">Ø£Ø®Ø±Ù‰</option>
                            </select>
                        </div>
                    </div>
                </div>
                
                <table class="data-table" id="allDataTable">
                    <thead>
                        <tr>
                            <th>Ø±Ù‚Ù… Ø§Ù„Ø·Ù„Ø¨</th>
                            <th>Ø§Ø³Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„</th>
                            <th>Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ù‚ÙˆÙ…ÙŠ</th>
                            <th>Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ</th>
                            <th>Ù†ÙˆØ¹ Ø§Ù„Ø®Ø¯Ù…Ø©</th>
                            <th>Ø§Ù„Ù…ÙˆØ¸Ù</th>
                            <th>ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¥Ø¯Ø®Ø§Ù„</th>
                            <th>Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>
                        </tr>
                    </thead>
                    <tbody id="allDataTableBody">
                        <!-- Data will be populated here -->
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Instructions Panel -->
        <div id="instructionsPanel" style="display: none; background: white; padding: 30px; border-radius: 15px; box-shadow: 0 8px 25px rgba(0,0,0,0.1);">
            <h2 style="color: #ff6600; margin-bottom: 30px;">ØªØ¹Ù„ÙŠÙ…Ø§Øª Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ù†Ø¸Ø§Ù…</h2>
            
            <div style="margin-bottom: 30px;">
                <h3 style="color: #333; margin-bottom: 15px;">Ù„Ù„Ù…ÙˆØ¸ÙÙŠÙ†:</h3>
                <ul style="line-height: 1.8; color: #666;">
                    <li>Ù‚Ù… Ø¨ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙˆÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„Ù…Ø®ØµØµØ© Ù„Ùƒ</li>
                    <li>Ø³ØªØ¬Ø¯ Ø±Ù‚Ù… Ø·Ù„Ø¨Ùƒ Ø§Ù„Ø­Ø§Ù„ÙŠ ÙÙŠ Ø£Ø¹Ù„Ù‰ Ø§Ù„ØµÙØ­Ø©</li>
                    <li>Ø£Ø¯Ø®Ù„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ Ø¨Ø¯Ù‚Ø© ÙÙŠ Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„Ù…Ø®ØµØµ</li>
                    <li>ØªØ£ÙƒØ¯ Ù…Ù† ØµØ­Ø© Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ù‚ÙˆÙ…ÙŠ (14 Ø±Ù‚Ù…)</li>
                    <li>ÙŠÙ…ÙƒÙ†Ùƒ Ø¹Ø±Ø¶ Ø³Ø¬Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØªÙŠ Ø£Ø¯Ø®Ù„ØªÙ‡Ø§ Ù…Ù† Ø®Ù„Ø§Ù„ "Ø¹Ø±Ø¶ Ø¨ÙŠØ§Ù†Ø§ØªÙŠ"</li>
                    <li>Ù„Ø§ ÙŠÙ…ÙƒÙ†Ùƒ Ø±Ø¤ÙŠØ© Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ† Ø§Ù„Ø¢Ø®Ø±ÙŠÙ†</li>
                </ul>
            </div>
            
            <div>
                <h3 style="color: #333; margin-bottom: 15px;">Ù„Ù„Ù…Ø¯ÙŠØ±ÙŠÙ†:</h3>
                <ul style="line-height: 1.8; color: #666;">
                    <li>ÙŠÙ…ÙƒÙ†Ùƒ Ø¥Ø¶Ø§ÙØ© Ù…ÙˆØ¸ÙÙŠÙ† Ø¬Ø¯Ø¯ ÙˆØ¥Ø¯Ø§Ø±Ø© Ø­Ø³Ø§Ø¨Ø§ØªÙ‡Ù…</li>
                    <li>Ø¹Ø±Ø¶ Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø´Ø§Ù…Ù„Ø© Ø¹Ù† Ø§Ù„Ù†Ø¸Ø§Ù…</li>
                    <li>Ù…Ø±Ø§Ù‚Ø¨Ø© Ø£Ø¯Ø§Ø¡ Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ† ÙˆØ¹Ø¯Ø¯ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø¯Ø®Ù„Ø©</li>
                    <li>Ø§Ù„Ø¨Ø­Ø« ÙˆØ§Ù„ÙÙ„ØªØ±Ø© ÙÙŠ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</li>
                    <li>ØªØªØ¨Ø¹ Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ† Ø§Ù„Ø°ÙŠÙ† Ù„Ù… ÙŠØ¯Ø®Ù„ÙˆØ§ Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ø¹Ø¯</li>
                    <li>ÙƒÙ„ Ù…ÙˆØ¸Ù Ù„Ù‡ Ø±Ù‚Ù… Ø·Ù„Ø¨ ÙØ±ÙŠØ¯ Ù„ØªØªØ¨Ø¹ Ø¹Ù…Ù„Ù‡</li>
                </ul>
            </div>
        </div>

        <!-- Data Details Modal -->
        <div id="dataModal" class="modal">
            <div class="modal-content">
                <span class="close" onclick="closeDataModal()">&times;</span>
                <h2 style="color: #ff6600; margin-bottom: 20px;">ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</h2>
                <div id="dataDetails"></div>
            </div>
        </div>

        <!-- Alert Messages -->
        <div id="alertContainer"></div>
    </div>

    <script>
        // Global variables
        let currentUser = null;
        let customerData = JSON.parse(localStorage.getItem('etisalatCustomerData')) || [];
        let requestCounter = parseInt(localStorage.getItem('etisalatRequestCounter') || '1');
        
        // User credentials - Load from localStorage or use defaults
        let users = JSON.parse(localStorage.getItem('etisalatSystemUsers')) || {
            'admin': { password: 'admin123', role: 'admin', name: 'Ø§Ù„Ù…Ø¯ÙŠØ± Ø§Ù„Ø¹Ø§Ù…', employeeId: 'ADM001' },
            'emp001': { password: 'emp123', role: 'employee', name: 'Ø£Ø­Ù…Ø¯ Ù…Ø­Ù…Ø¯', employeeId: 'EMP001' }
        };
        
        // Save users to localStorage
        function saveUsers() {
            localStorage.setItem('etisalatSystemUsers', JSON.stringify(users));
        }
        
        // Save customer data to localStorage
        function saveCustomerData() {
            localStorage.setItem('etisalatCustomerData', JSON.stringify(customerData));
        }
        
        // Save request counter to localStorage
        function saveRequestCounter() {
            localStorage.setItem('etisalatRequestCounter', requestCounter.toString());
        }

        // Login function
        function login() {
            const username = document.getElementById('username').value;
            const password = document.getElementById('password').value;
            
            if (users[username] && users[username].password === password) {
                currentUser = {
                    username: username,
                    role: users[username].role,
                    name: users[username].name,
                    employeeId: users[username].employeeId
                };
                
                document.getElementById('loginForm').classList.remove('show');
                document.getElementById('navBar').classList.add('show');
                document.getElementById('userInfo').innerHTML = `Ù…Ø±Ø­Ø¨Ø§Ù‹ ${currentUser.name} (${currentUser.role === 'admin' ? 'Ù…Ø¯ÙŠØ±' : 'Ù…ÙˆØ¸Ù'})`;
                
                if (currentUser.role === 'admin') {
                    document.getElementById('adminBtn').style.display = 'inline-block';
                    showAdminPanel();
                } else {
                    showEmployeePanel();
                }
                
                showAlert('ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¨Ù†Ø¬Ø§Ø­', 'success');
            } else {
                showAlert('Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø£Ùˆ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ØºÙŠØ± ØµØ­ÙŠØ­Ø©', 'error');
            }
        }

        // Logout function
        function logout() {
            currentUser = null;
            document.getElementById('loginForm').classList.add('show');
            document.getElementById('navBar').classList.remove('show');
            document.getElementById('employeePanel').classList.remove('show');
            document.getElementById('adminPanel').classList.remove('show');
            document.getElementById('username').value = '';
            document.getElementById('password').value = '';
            clearForm();
            showAlert('ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬ Ø¨Ù†Ø¬Ø§Ø­', 'success');
        }

        // Show employee panel
        function showEmployeePanel() {
            document.getElementById('employeePanel').classList.add('show');
            document.getElementById('adminPanel').classList.remove('show');
            document.getElementById('instructionsPanel').style.display = 'none';
            
            if (currentUser && currentUser.role === 'employee') {
                document.getElementById('employeeName').textContent = currentUser.name;
                document.getElementById('employeeId').textContent = currentUser.employeeId;
                updateCurrentRequestNumber();
            }
        }

        // Show admin panel
        function showAdminPanel() {
            if (currentUser && currentUser.role === 'admin') {
                document.getElementById('adminPanel').classList.add('show');
                document.getElementById('employeePanel').classList.remove('show');
                document.getElementById('instructionsPanel').style.display = 'none';
                loadAdminData();
            }
        }

        // Show instructions panel
        function showInstructions() {
            document.getElementById('instructionsPanel').style.display = 'block';
            document.getElementById('employeePanel').classList.remove('show');
            document.getElementById('adminPanel').classList.remove('show');
        }
        
        // Update current request number for employee
        function updateCurrentRequestNumber() {
            if (currentUser && currentUser.role === 'employee') {
                const nextRequestNumber = `ETI-${String(requestCounter).padStart(4, '0')}`;
                document.getElementById('currentRequestNumber').textContent = `Ø±Ù‚Ù… Ø§Ù„Ø·Ù„Ø¨ Ø§Ù„Ø­Ø§Ù„ÙŠ: ${nextRequestNumber}`;
            }
        }

        // Submit customer data
        function submitCustomerData() {
            if (!currentUser || currentUser.role !== 'employee') {
                showAlert('ØºÙŠØ± Ù…ØµØ±Ø­ Ù„Ùƒ Ø¨Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª', 'error');
                return;
            }
            
            const customerName = document.getElementById('customerName').value.trim();
            const nationalId = document.getElementById('nationalId').value.trim();
            const phoneNumber = document.getElementById('phoneNumber').value.trim();
            const address = document.getElementById('address').value.trim();
            const serviceType = document.getElementById('serviceType').value;
            const notes = document.getElementById('notes').value.trim();
            
            // Validation
            if (!customerName || !nationalId || !phoneNumber || !address || !serviceType) {
                showAlert('ÙŠØ±Ø¬Ù‰ Ù…Ù„Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©', 'error');
                return;
            }
            
            if (nationalId.length !== 14 || !/^\d+$/.test(nationalId)) {
                showAlert('Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ù‚ÙˆÙ…ÙŠ ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† 14 Ø±Ù‚Ù…', 'error');
                return;
            }
            
            // Check if national ID already exists
            const existingData = customerData.find(data => data.nationalId === nationalId);
            if (existingData) {
                showAlert('Ù‡Ø°Ø§ Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ù‚ÙˆÙ…ÙŠ Ù…ÙˆØ¬ÙˆØ¯ Ø¨Ø§Ù„ÙØ¹Ù„ ÙÙŠ Ø§Ù„Ù†Ø¸Ø§Ù…', 'error');
                return;
            }
            
            // Create new data entry
            const newData = {
                id: Date.now(),
                requestNumber: `ETI-${String(requestCounter).padStart(4, '0')}`,
                customerName: customerName,
                nationalId: nationalId,
                phoneNumber: phoneNumber,
                address: address,
                serviceType: serviceType,
                notes: notes,
                employeeUsername: currentUser.username,
                employeeName: currentUser.name,
                employeeId: currentUser.employeeId,
                date: new Date().toLocaleDateString('ar-EG'),
                time: new Date().toLocaleTimeString('ar-EG'),
                status: 'Ù…ÙƒØªÙ…Ù„'
            };
            
            customerData.push(newData);
            requestCounter++;
            
            saveCustomerData();
            saveRequestCounter();
            
            showAlert('ØªÙ… Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ù†Ø¬Ø§Ø­', 'success');
            clearForm();
            updateCurrentRequestNumber();
        }

        // Clear form
        function clearForm() {
            document.getElementById('customerName').value = '';
            document.getElementById('nationalId').value = '';
            document.getElementById('phoneNumber').value = '';
            document.getElementById('address').value = '';
            document.getElementById('serviceType').value = '';
            document.getElementById('notes').value = '';
        }

        // Show employee's own data
        function showMyData() {
            if (!currentUser || currentUser.role !== 'employee') return;
            
            const myData = customerData.filter(data => data.employeeUsername === currentUser.username);
            const tableBody = document.getElementById('myDataTableBody');
            tableBody.innerHTML = '';
            
            myData.forEach(data => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${data.requestNumber}</td>
                    <td>${data.customerName}</td>
                    <td>${data.nationalId}</td>
                    <td>${data.phoneNumber}</td>
                    <td>${data.serviceType}</td>
                    <td>${data.date}</td>
                    <td><span class="status-completed">${data.status}</span></td>
                `;
                tableBody.appendChild(row);
            });
            
            document.getElementById('myDataSection').style.display = 'block';
        }

        // Hide employee's data section
        function hideMyData() {
            document.getElementById('myDataSection').style.display = 'none';
        }

        // Add new employee (Admin only)
        function addNewEmployee() {
            if (!currentUser || currentUser.role !== 'admin') {
                showAlert('ØºÙŠØ± Ù…ØµØ±Ø­ Ù„Ùƒ Ø¨Ø¥Ø¶Ø§ÙØ© Ù…ÙˆØ¸ÙÙŠÙ†', 'error');
                return;
            }
            
            const username = document.getElementById('newUsername').value.trim();
            const password = document.getElementById('newPassword').value.trim();
            const fullName = document.getElementById('newFullName').value.trim();
            
            if (!username || !password || !fullName) {
                showAlert('ÙŠØ±Ø¬Ù‰ Ù…Ù„Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„', 'error');
                return;
            }
            
            if (users[username]) {
                showAlert('Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù…ÙˆØ¬ÙˆØ¯ Ø¨Ø§Ù„ÙØ¹Ù„', 'error');
                return;
            }
            
            if (username.length < 3) {
                showAlert('Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† 3 Ø£Ø­Ø±Ù Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„', 'error');
                return;
            }
            
            if (password.length < 6) {
                showAlert('ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ÙŠØ¬Ø¨ Ø£Ù† ØªÙƒÙˆÙ† 6 Ø£Ø­Ø±Ù Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„', 'error');
                return;
            }
            
            // Generate employee ID
            const employeeCount = Object.keys(users).filter(u => users[u].role === 'employee').length;
            const employeeId = `EMP${String(employeeCount + 1).padStart(3, '0')}`;
            
            // Add new user
            users[username] = {
                password: password,
                role: 'employee',
                name: fullName,
                employeeId: employeeId
            };
            
            saveUsers();
            loadAdminData();
            
            // Clear form
            document.getElementById('newUsername').value = '';
            document.getElementById('newPassword').value = '';
            document.getElementById('newFullName').value = '';
            
            showAlert('ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…ÙˆØ¸Ù Ø¨Ù†Ø¬Ø§Ø­', 'success');
        }

        // Load admin data
        function loadAdminData() {
            if (!currentUser || currentUser.role !== 'admin') return;
            
            // Update statistics
            const employees = Object.keys(users).filter(u => users[u].role === 'employee');
            const totalEmployees = employees.length;
            const totalData = customerData.length;
            const employeesWithData = [...new Set(customerData.map(data => data.employeeUsername))].length;
            const employeesWithoutData = totalEmployees - employeesWithData;
            const today = new Date().toLocaleDateString('ar-EG');
            const todayData = customerData.filter(data => data.date === today).length;
            
            document.getElementById('totalEmployees').textContent = totalEmployees;
            document.getElementById('totalData').textContent = totalData;
            document.getElementById('employeesWithoutData').textContent = employeesWithoutData;
            document.getElementById('todayData').textContent = todayData;
            
            // Load employees table
            loadEmployeesTable();
            
            // Load all data table
            loadAllDataTable();
            
            // Update employee filter
            updateEmployeeFilter();
        }

        // Load employees table
        function loadEmployeesTable() {
            const tbody = document.getElementById('employeesTableBody');
            tbody.innerHTML = '';
            
            Object.keys(users).forEach(username => {
                const user = users[username];
                if (user.role === 'employee') {
                    const employeeData = customerData.filter(data => data.employeeUsername === username);
                    const dataCount = employeeData.length;
                    const lastActivity = employeeData.length > 0 ? 
                        employeeData[employeeData.length - 1].date : 'Ù„Ù… ÙŠØ¯Ø®Ù„ Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ø¹Ø¯';
                    
                    const row = document.createElement('tr');
                    row.innerHTML = `
                        <td>${username}</td>
                        <td>${user.name}</td>
                        <td>${user.employeeId}</td>
                        <td>${dataCount}</td>
                        <td>${lastActivity}</td>
                        <td>
                            <button onclick="editEmployee('${username}')" class="btn" style="background: #007bff; color: white; padding: 5px 10px; font-size: 12px; margin-left: 5px;">ØªØ¹Ø¯ÙŠÙ„</button>
                            <button onclick="deleteEmployee('${username}')" class="btn btn-danger" style="background: #dc3545; padding: 5px 10px; font-size: 12px;">Ø­Ø°Ù</button>
                        </td>
                    `;
                    
                    // Highlight employees without data
                    if (dataCount === 0) {
                        row.style.backgroundColor = '#fff3cd';
                    }
                    
                    tbody.appendChild(row);
                }
            });
        }

        // Load all data table
        function loadAllDataTable() {
            const tbody = document.getElementById('allDataTableBody');
            tbody.innerHTML = '';
            
            customerData.forEach(data => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${data.requestNumber}</td>
                    <td>${data.customerName}</td>
                    <td>${data.nationalId}</td>
                    <td>${data.phoneNumber}</td>
                    <td>${data.serviceType}</td>
                    <td>${data.employeeName} (${data.employeeId})</td>
                    <td>${data.date}</td>
                    <td>
                        <button onclick="viewDataDetails(${data.id})" class="btn btn-info" style="padding: 5px 10px; font-size: 12px;">Ø§Ù„ØªÙØ§ØµÙŠÙ„</button>
                    </td>
                `;
                tbody.appendChild(row);
            });
        }

        // Update employee filter
        function updateEmployeeFilter() {
            const select = document.getElementById('employeeFilter');
            select.innerHTML = '<option value="">Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ†</option>';
            
            Object.keys(users).forEach(username => {
                const user = users[username];
                if (user.role === 'employee') {
                    const option = document.createElement('option');
                    option.value = username;
                    option.textContent = `${user.name} (${user.employeeId})`;
                    select.appendChild(option);
                }
            });
        }

        // Filter all data
        function filterAllData() {
            const searchTerm = document.getElementById('searchInput').value.toLowerCase();
            const employeeFilter = document.getElementById('employeeFilter').value;
            const serviceFilter = document.getElementById('serviceFilter').value;
            
            const filteredData = customerData.filter(data => {
                const matchesSearch = data.customerName.toLowerCase().includes(searchTerm) || 
                                    data.nationalId.includes(searchTerm) ||
                                    data.requestNumber.toLowerCase().includes(searchTerm);
                const matchesEmployee = !employeeFilter || data.employeeUsername === employeeFilter;
                const matchesService = !serviceFilter || data.serviceType === serviceFilter;
                
                return matchesSearch && matchesEmployee && matchesService;
            });
            
            const tbody = document.getElementById('allDataTableBody');
            tbody.innerHTML = '';
            
            filteredData.forEach(data => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${data.requestNumber}</td>
                    <td>${data.customerName}</td>
                    <td>${data.nationalId}</td>
                    <td>${data.phoneNumber}</td>
                    <td>${data.serviceType}</td>
                    <td>${data.employeeName} (${data.employeeId})</td>
                    <td>${data.date}</td>
                    <td>
                        <button onclick="viewDataDetails(${data.id})" class="btn btn-info" style="padding: 5px 10px; font-size: 12px;">Ø§Ù„ØªÙØ§ØµÙŠÙ„</button>
                    </td>
                `;
                tbody.appendChild(row);
            });
        }

        // Edit employee
        function editEmployee(username) {
            const user = users[username];
            const newName = prompt('Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„ Ø§Ù„Ø¬Ø¯ÙŠØ¯:', user.name);
            const newPassword = prompt('ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© (Ø§ØªØ±ÙƒÙ‡Ø§ ÙØ§Ø±ØºØ© Ù„Ù„Ø§Ø­ØªÙØ§Ø¸ Ø¨Ø§Ù„Ø­Ø§Ù„ÙŠØ©):');
            
            if (newName !== null && newName.trim() !== '') {
                users[username].name = newName.trim();
                
                if (newPassword && newPassword.trim() !== '') {
                    if (newPassword.length < 6) {
                        showAlert('ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ÙŠØ¬Ø¨ Ø£Ù† ØªÙƒÙˆÙ† 6 Ø£Ø­Ø±Ù Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„', 'error');
                        return;
                    }
                    users[username].password = newPassword.trim();
                }
                
                saveUsers();
                loadAdminData();
                showAlert('ØªÙ… ØªØ¹Ø¯ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…ÙˆØ¸Ù Ø¨Ù†Ø¬Ø§Ø­', 'success');
            }
        }

        // Delete employee
        function deleteEmployee(username) {
            if (confirm(`Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ø§Ù„Ù…ÙˆØ¸Ù: ${users[username].name}ØŸ\nØ³ÙŠØªÙ… Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø±ØªØ¨Ø·Ø© Ø¨Ù‡.`)) {
                // Remove employee data
                customerData = customerData.filter(data => data.employeeUsername !== username);
                saveCustomerData();
                
                // Remove user
                delete users[username];
                saveUsers();
                
                loadAdminData();
                showAlert('ØªÙ… Ø­Ø°Ù Ø§Ù„Ù…ÙˆØ¸Ù ÙˆØ¨ÙŠØ§Ù†Ø§ØªÙ‡ Ø¨Ù†Ø¬Ø§Ø­', 'success');
            }
        }

        // View data details
        function viewDataDetails(dataId) {
            const data = customerData.find(d => d.id === dataId);
            if (data) {
                const details = `
                    <div style="line-height: 1.8;">
                        <p><strong>Ø±Ù‚Ù… Ø§Ù„Ø·Ù„Ø¨:</strong> ${data.requestNumber}</p>
                        <p><strong>Ø§Ø³Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„:</strong> ${data.customerName}</p>
                        <p><strong>Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ù‚ÙˆÙ…ÙŠ:</strong> ${data.nationalId}</p>
                        <p><strong>Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ:</strong> ${data.phoneNumber}</p>
                        <p><strong>Ø§Ù„Ø¹Ù†ÙˆØ§Ù†:</strong> ${data.address}</p>
                        <p><strong>Ù†ÙˆØ¹ Ø§Ù„Ø®Ø¯Ù…Ø©:</strong> ${data.serviceType}</p>
                        <p><strong>Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª:</strong> ${data.notes || 'Ù„Ø§ ØªÙˆØ¬Ø¯'}</p>
                        <p><strong>Ø§Ù„Ù…ÙˆØ¸Ù Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„:</strong> ${data.employeeName} (${data.employeeId})</p>
                        <p><strong>ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¥Ø¯Ø®Ø§Ù„:</strong> ${data.date}</p>
                        <p><strong>ÙˆÙ‚Øª Ø§Ù„Ø¥Ø¯Ø®Ø§Ù„:</strong> ${data.time}</p>
                        <p><strong>Ø§Ù„Ø­Ø§Ù„Ø©:</strong> <span class="status-completed">${data.status}</span></p>
                    </div>
                `;
                
                document.getElementById('dataDetails').innerHTML = details;
                document.getElementById('dataModal').style.display = 'block';
            }
        }

        // Close data modal
        function closeDataModal() {
            document.getElementById('dataModal').style.display = 'none';
        }

        // Show alert messages
        function showAlert(message, type) {
            const alertContainer = document.getElementById('alertContainer');
            const alert = document.createElement('div');
            alert.className = `alert alert-${type === 'success' ? 'success' : 'error'}`;
            alert.textContent = message;
            
            alertContainer.appendChild(alert);
            
            setTimeout(() => {
                alert.remove();
            }, 5000);
        }

        // Validate national ID input
        document.getElementById('nationalId').addEventListener('input', function(e) {
            e.target.value = e.target.value.replace(/[^0-9]/g, '');
        });

        // Validate phone number input
        document.getElementById('phoneNumber').addEventListener('input', function(e) {
            e.target.value = e.target.value.replace(/[^0-9+]/g, '');
        });

        // Enter key login
        document.addEventListener('keypress', function(e) {
            if (e.key === 'Enter' && document.getElementById('loginForm').classList.contains('show')) {
                login();
            }
        });
        
        // Close modal when clicking outside
        window.onclick = function(event) {
            const modal = document.getElementById('dataModal');
            if (event.target === modal) {
                modal.style.display = 'none';
            }
        }
        
        // Initialize default data
        function initializeDefaultData() {
            // Add some sample data if none exists
            if (customerData.length === 0) {
                const sampleData = [
                    {
                        id: 1,
                        requestNumber: 'ETI-0001',
                        customerName: 'Ù…Ø­Ù…Ø¯ Ø£Ø­Ù…Ø¯ Ø¹Ù„ÙŠ',
                        nationalId: '12345678901234',
                        phoneNumber: '01234567890',
                        address: 'Ø§Ù„Ù‚Ø§Ù‡Ø±Ø©ØŒ Ù…ØµØ± Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©ØŒ Ø´Ø§Ø±Ø¹ Ø§Ù„Ø­Ø¬Ø§Ø²',
                        serviceType: 'Ø®Ø· Ø¬Ø¯ÙŠØ¯',
                        notes: 'Ø¹Ù…ÙŠÙ„ Ø¬Ø¯ÙŠØ¯',
                        employeeUsername: 'emp001',
                        employeeName: 'Ø£Ø­Ù…Ø¯ Ù…Ø­Ù…Ø¯',
                        employeeId: 'EMP001',
                        date: new Date().toLocaleDateString('ar-EG'),
                        time: new Date().toLocaleTimeString('ar-EG'),
                        status: 'Ù…ÙƒØªÙ…Ù„'
                    }
                ];
                
                customerData = sampleData;
                requestCounter = 2;
                saveCustomerData();
                saveRequestCounter();
            }
        }
        
        // Initialize on page load
        document.addEventListener('DOMContentLoaded', function() {
            initializeDefaultData();
        });
    </script>
</body>
</html>